<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Country Population Lookup</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 1rem; }
  h1 { text-align: center; }
  select, button { padding: 0.5rem; margin: 0.5rem 0; width: 100%; }
  .result { margin-top: 1rem; padding: 1rem; border: 1px solid #ccc; }
</style>
</head>
<body>
<h1>🌍 Country Populations</h1>

<label for="countrySelect">Choose a country:</label>
<select id="countrySelect"></select>
<button id="fetchLive">Get Live Data</button>

<div class="result" id="output">
  Select a country to see its population.
</div>

<script>
// --- 1. Embedded data fallback ---
const embeddedData = {
  "Australia": 26000000,
  "India": 1400000000,
  "United States": 334000000,
  "Japan": 125000000,
  "Canada": 38000000
};

// Populate dropdown from embedded data keys
const select = document.getElementById('countrySelect');
Object.keys(embeddedData).forEach(country => {
  const opt = document.createElement('option');
  opt.value = country;
  opt.textContent = country;
  select.appendChild(opt);
});

const output = document.getElementById('output');

// --- 2. Show embedded population initially ---
select.addEventListener('change', () => {
  const country = select.value;
  output.innerHTML = `📦 Embedded Data → <strong>${country}</strong>: ${embeddedData[country].toLocaleString()} people`;
});

// --- 3. Live data fetch from REST Countries ---
document.getElementById('fetchLive').addEventListener('click', () => {
  const country = select.value;
  output.textContent = "Fetching live data...";
  fetch(`https://restcountries.com/v3.1/name/${encodeURIComponent(country)}?fullText=true`)
    .then(res => res.json())
    .then(data => {
      if (Array.isArray(data) && data[0]?.population) {
        const livePop = data[0].population;
        output.innerHTML = `🔴 Live Data → <strong>${country}</strong>: ${livePop.toLocaleString()} people`;
      } else {
        output.textContent = "Live data not available, showing embedded value.";
      }
    })
    .catch(err => {
      output.textContent = "Error fetching live data, showing embedded value.";
    });
});

// Initialize first selection
select.dispatchEvent(new Event('change'));
</script>
</body>
</html>
