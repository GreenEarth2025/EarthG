<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>World Population Lookup page by Madanapalli Mopuri</title>
<style>
  body {
    font-family: Arial, sans-serif;
    color: #eee;
    background-color: #121212;
    background-image: url('https://upload.wikimedia.org/wikipedia/commons/9/97/The_Blue_Marble_%28remastered%29.jpg');
    background-size: cover;
    background-attachment: fixed;
    margin: 0;
    padding: 1rem;
  }
  h1 {
    text-align: center;
    color: #fff;
    text-shadow: 2px 2px 4px #000;
  }
  .container {
    background-color: rgba(0, 0, 0, 0.75);
    padding: 1rem;
    border-radius: 8px;
    max-width: 700px;
    margin: auto;
  }
  select, button {
    padding: 0.5rem;
    margin: 0.5rem 0;
    width: 100%;
    border-radius: 4px;
    border: none;
    font-size: 1rem;
  }
  select {
    background-color: #222;
    color: #eee;
  }
  button {
    background-color: #1e88e5;
    color: white;
    cursor: pointer;
  }
  button:hover {
    background-color: #1565c0;
  }
  .result {
    margin-top: 1rem;
    padding: 1rem;
    background-color: rgba(30, 30, 30, 0.8);
    border-radius: 4px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 0.5rem;
  }
  th, td {
    border: 1px solid #444;
    padding: 0.5rem;
    text-align: left;
  }
  th {
    background-color: #222;
  }
</style>
</head>
<body>
<h1>üåç World Population Lookup</h1>
<div class="container">
  <label for="countrySelect">Choose a country:</label>
  <select id="countrySelect"><option>Loading...</option></select>
  <button id="fetchData">Check Embedded & Live Data</button>
  <div class="result" id="output">Select a country and click the button.</div>
</div>

<script>
// --- 1. Embedded data (50 countries for offline fallback) ---
const embeddedData = {
"Afghanistan": 38928346,"Albania": 2877797,"Algeria": 43851044,"Angola": 32866272,"Argentina": 45195774,
"Australia": 25687041,"Austria": 9006398,"Bangladesh": 164689383,"Belgium": 11589623,"Bhutan": 771608,
"Bolivia": 11673029,"Brazil": 212559417,"Bulgaria": 6951482,"Cambodia": 16718965,"Cameroon": 26545863,
"Canada": 37742154,"Chile": 19116201,"China": 1439323776,"Colombia": 50882891,"Costa Rica": 5094118,
"Croatia": 4105267,"Cuba": 11326616,"Czech Republic": 10708981,"Denmark": 5792202,"Dominican Republic": 10847910,
"Ecuador": 17643054,"Egypt": 102334404,"Ethiopia": 114963588,"Finland": 5540720,"France": 65273511,
"Germany": 83783942,"Ghana": 31072940,"Greece": 10423054,"Guatemala": 17915568,"Haiti": 11402528,
"Honduras": 9904607,"Hungary": 9660351,"Iceland": 343599,"India": 1380004385,"Indonesia": 273523615,
"Iran": 83992949,"Iraq": 40222493,"Ireland": 4937786,"Israel": 8655535,"Italy": 60461826,"Jamaica": 2961167,
"Japan": 126476461,"Jordan": 10203134,"Kenya": 53771296,"South Africa": 59308690
};

// --- 2. Populate dropdown from live API, fallback to embedded list ---
const select = document.getElementById('countrySelect');

fetch('https://restcountries.com/v3.1/all')
  .then(res => res.json())
  .then(data => {
    select.innerHTML = '';
    const names = data.map(c => c.name.common).sort();
    names.forEach(country => {
      const opt = document.createElement('option');
      opt.value = country;
      opt.textContent = country;
      select.appendChild(opt);
    });
  })
  .catch(() => {
    // Fallback to embedded keys
    select.innerHTML = '';
    Object.keys(embeddedData).sort().forEach(country => {
      const opt = document.createElement('option');
      opt.value = country;
      opt.textContent = country;
      select.appendChild(opt);
    });
  });

// --- 3. Compare embedded vs live ---
document.getElementById('fetchData').addEventListener('click', () => {
  const country = select.value;
  const embeddedPop = embeddedData[country] || 'N/A';
  const output = document.getElementById('output');
  output.innerHTML = "Fetching live data...";

  fetch(`https://restcountries.com/v3.1/name/${encodeURIComponent(country)}?fullText=true`)
    .then(res => res.json())
    .then(data => {
      let livePop = 'N/A';
      if (Array.isArray(data) && data[0]?.population) {
        livePop = data[0].population;
      }
      output.innerHTML = `
        <table>
          <tr><th>Source</th><th>Population</th></tr>
          <tr><td>üì¶ Embedded</td><td>${embeddedPop !== 'N/A' ? embeddedPop.toLocaleString() : 'N/A'}</td></tr>
          <tr><td>üî¥ Live API</td><td>${livePop !== 'N/A' ? livePop.toLocaleString() : 'N/A'}</td></tr>
        </table>
      `;
    })
    .catch(() => {
      output.innerHTML = `
        <table>
          <tr><th>Source</th><th>Population</th></tr>
          <tr><td>üì¶ Embedded</td><td>${embeddedPop !== 'N/A' ? embeddedPop.toLocaleString() : 'N/A'}</td></tr>
          <tr><td>üî¥ Live API</td><td>Error fetching live data</td></tr>
        </table>
      `;
    });
});
</script>
</body>
</html>
